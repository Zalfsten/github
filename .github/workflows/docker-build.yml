name: Docker Build and Test

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  docker-build-test:
    name: Docker Build and Test
    uses: ./.github/workflows/docker-build-reusable.yml
    with:
      push_to_registry: ${{ github.event_name == 'push' && github.ref == 'refs/heads/main' }}
      create_artifacts: true
    secrets: inherit
